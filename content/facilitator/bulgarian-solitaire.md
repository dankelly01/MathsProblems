# Bulgarian Solitaire

## Introduction

Bulgarian Solitatire is a simple game, traditionally played with cards which are arranged in piles like the *skyscrapers* in this question. The cards are then rearraged in the same way that King Kong decides to rebuild the city until the sequence terminates. In mathematics we call a sequence like this, where each new member is generated by performing a set of intructions on the last, an *algorithm*.

The nice part about this puzzle is that there are many questions that you could ask about the algorithm which is presented:

How many possible cities are there for some number of blocks?  
What is the longest sequece for a given number of squares?  
How does a sequence using some number of squares end?

Students can (and should) ask their own questions about this puzzle and others as this is a very important skill in mathematics.

## Solution

Here we will discuss the puzzle using 7 squares, you can see the extension section for 6 and 8 squares as well as some links to resources regarding this puzzle.

Let us notate the cities in a more concise way by listing the number of squares in each skyscraper from left to right.  
In this way we can write the starting city in the example as **(5,2)**.  
The sequence in the example can be written **(5,2)** $\rightarrow$ **(4,2,1)** $\rightarrow$ **(3,3,1)** $\rightarrow$ **(3,2,2)** $\rightarrow$ **(3,2,1,1)** $\rightarrow$ *(4,2,1)*

There are 15 options for a city of 7 squares:  
**(7)**  
**(6,1)**  
**(5,2)**, **(5,1,1)**  
**(4,3)**, **(4,2,1)**, **(4,1,1,1)**  
**(3,3,1)**, **(3,2,2)**, **(3,2,1,1)**, **(3,1,1,1,1)**  
**(2,2,2,1)**, **(2,2,1,1,1)**, **(2,1,1,1,1,1)**  
**(1,1,1,1,1,1,1)**  

We can start to join up these cities based on which lead to which when they are rearranged. For example,  
**(7)** $\rightarrow$ **(6,1)**  
**(6,1)** $\rightarrow$ **(5,2)**  
**(5,2)** $\rightarrow$ **(4,2,1)**  
**(5,1,1)** $\rightarrow$ **(4,3)**

In fact, we can create a flow diagram which joins up all of the different options for cities made up of seven squares:

<img src="../../images/bulgarian-solitaire-08.png" width=300>

Now we can see the answers to our questions. The longest sequence has 7 different cities, starting at **(1,1,1,1,1,1,1)**:

<img src="../../images/bulgarian-solitaire-05.png" width=300>

And we can also see that all of the sequences end in a loop of four cities: **(4,2,1)**, **(3,3,1)**, **(3,2,2)** and **(3,2,1,1)**.

## Extension

Using 6 squares, there are 11 different possible cities:  
**(6)**  
**(5,1)**  
**(4,2)**, **(4,1,1)**  
**(3,3)**, **(3,2,1)**, **(3,1,1,1)**  
**(2,2,2)**, **(2,2,1,1)**, **(2,1,1,1,1)**  
**(1,1,1,1,1,1)**  

We can arrange these in a flow diagram:

<img src="../../images/bulgarian-solitaire-09.png" width=300>

So the longest sequence has 7 different cities, starting at **(2,2,1,1)**:

<img src="../../images/bulgarian-solitaire-06.png" width=300>

And all sequences end in the city **(3,2,1)**, which produces itself then rearraged,

Using 8 squares, there are 22 different possible cities:  
**(8)**  
**(7,1)**  
**(6,2)**, **(6,1,1)**  
**(5,3)**, **(5,2,1)**, **(5,1,1,1)**  
**(4,4)**, **(4,3,1)**, **(4,2,2)**, **(4,2,1,1)**, **(4,1,1,1,1)**  
**(3,3,2)**, **(3,3,1,1)**, **(3,2,2,1)**, **(3,2,1,1,1)**, **(3,1,1,1,1,1)**
**(2,2,2,2)**, **(2,2,2,1,1)**, **(2,2,1,1,1,1)**, **(2,1,1,1,1,1,1)**  
**(1,1,1,1,1,1,1,1)**

We can arrange these in a flow diagram:

<img src="../../images/bulgarian-solitaire-10.png" width=300>

But here we notice a difference between using 6 or 7 squares, and using 8. The flow diagram is in two seperate parts!

We can still identify the longest sequence, which starts at **(1,1,1,1,1,1,1,1)** and has 9 different cities:

<img src="../../images/bulgarian-solitaire-07.png" width=300>

Depending on the starting point, we can either end up at:  
a 4 city loop: **(4,3,1)**, **(3,3,2)**, **(3,2,2,1)** and **(4,2,1,1)**  
a 2 city loop: **(3,3,1,1)** and **(4,2,2)**


If you would like to explore the ideas of this puzzle further, here are some excellent resources:

<a href="https://mathpickle.com/project/bulgarian-solitaire-patterns/" target="_blank">MathPickle</a>  
A slide show which gives flow diagrams and ending loops for cities using large numbers of squares.

<a href="https://www.youtube.com/watch?v=p3Bzvlnl-1s" target="_blank">Tipping Point Math</a>  
A YouTube video which looks at why certain numbers of squares give one or multiple ending loops of certain sizes.
